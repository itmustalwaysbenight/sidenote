---
layout: post
title: "Chat with openai"
date: 2024-09-13
---


# Chat with OpenAI API

Try out the chat function below to ask OpenAI anything!

<div id="chat-container">
    <div id="chat-messages" style="height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
        <p><em>Start the conversation...</em></p>
    </div>
    <input type="text" id="user-input" placeholder="Type your message here" style="width: 80%; padding: 10px;">
    <button id="send-btn" style="padding: 10px;">Send</button>
</div>

<script>
    document.getElementById('send-btn').addEventListener('click', function() {
        const userMessage = document.getElementById('user-input').value;
        if (userMessage.trim() === "") return;

        addMessageToChat("User", userMessage);
        callOpenAI(userMessage);
    });

    function addMessageToChat(sender, message) {
        const chatMessages = document.getElementById('chat-messages');
        chatMessages.innerHTML += `<p><strong>${sender}:</strong> ${message}</p>`;
        chatMessages.scrollTop = chatMessages.scrollHeight;  // Scroll to bottom
    }

    async function callOpenAI(message) {
        const response = await fetch('/.netlify/functions/openai-chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ query: message })
        });

        if (response.ok) {
            const data = await response.json();
            addMessageToChat("AI", data.reply);
        } else {
            addMessageToChat("AI", "Error: Unable to fetch response from OpenAI.");
        }

        document.getElementById('user-input').value = '';  // Clear input field
    }
</script>
